<app-header></app-header>

<mat-card class="center-card">
  <h2>Mi Perfil</h2>

  <form [formGroup]="perfilForm">
    <mat-form-field appearance="fill">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="nombre">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email">
    </mat-form-field>

    <div style="margin-top: 1rem;">
      <button *ngIf="!editando" mat-raised-button color="primary" (click)="activarEdicion()">
        Editar perfil
      </button>

      <button *ngIf="editando" mat-raised-button color="accent" (click)="guardarCambios()">
        Guardar cambios
      </button>
    </div>
  </form>

  <div style="margin-top: 2rem;">
    <button mat-raised-button color="warn" (click)="mostrarFormularioContrasena = !mostrarFormularioContrasena">
      Cambiar contraseña
    </button>
  </div>

  <div *ngIf="mostrarFormularioContrasena" class="password-form-container">
    <h3 style="margin-top: 1rem;">Actualizar contraseña</h3>

    <form>
  <mat-form-field appearance="fill" class="full-width">
  <mat-label>Nueva contraseña</mat-label>
  <input matInput [type]="hideNuevaContrasena ? 'password' : 'text'" [(ngModel)]="nuevaContrasena" name="nuevaContrasena" required>
  <button mat-icon-button matSuffix (click)="hideNuevaContrasena = !hideNuevaContrasena" type="button">
    <mat-icon>{{ hideNuevaContrasena ? 'visibility_off' : 'visibility' }}</mat-icon>
  </button>
</mat-form-field>

<mat-form-field appearance="fill" class="full-width">
  <mat-label>Repetir nueva contraseña</mat-label>
  <input matInput [type]="hideConfirmarContrasena ? 'password' : 'text'" [(ngModel)]="confirmarContrasena" name="confirmarContrasena" required>
  <button mat-icon-button matSuffix (click)="hideConfirmarContrasena = !hideConfirmarContrasena" type="button">
    <mat-icon>{{ hideConfirmarContrasena ? 'visibility_off' : 'visibility' }}</mat-icon>
  </button>
</mat-form-field>


      <div class="button-group">
        <button mat-raised-button color="primary" (click)="cambiarContrasena()">
          Guardar contraseña
        </button>
        <button mat-button type="button" (click)="mostrarFormularioContrasena = false">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</mat-card>
